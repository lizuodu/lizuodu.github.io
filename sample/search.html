<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
        <link href="./search/stylesheets/jsTree.min.css" rel="stylesheet"/>
        <script src="//cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
        <script src="./search/jstree.min.js"></script>
        
        <link href="./search/stylesheets/style.css?v=1.2" rel="stylesheet"/>
        <script src="./search/searchtree.js?v=1.1"></script>
        
        <style type="text/css">
            .demo {
                width: 800px;
                height: 100%;
                padding: 10px 30px;
            }
            #searchtree1 {
                float: left;
            }
            #result {
                height: 600px;
                padding: 0 20px;
                float: left;
            }
        </style>

        <script>
            window.onload = function() {
                var $res = $('#result');
                var searchTree = $("#searchtree1").searchTree({
                    url: 'data/searchtree.json',
                    expand_all: false,
                    expand_first_layer: true,
                    style: 'width: 300px;height:600px;background-color: #F9FAFC; overflow-y:hidden',
                    tools: true,
                    search_max_item: 10,
                    search_click: false,
                    noDataCall: function (msg) {
                        $res.append(msg + '</br/>');
                    },
                    searchClick: function (node) {
                        console.log(node);
                        $res.append('key-->' + node.key + ',text-->' + node.text + '<br/>');
                    },
                    treeNodeClick: function (node) {
                        console.log(node);
                        $res.append('key-->' + node.key + ',text-->' + node.text + '<br/>');
                    },
                    refreshCall: function () {
                        $res.html('');
                    },
                    callback: function (node) {
                        console.log(node);
                        var id = 'ajson' + Math.random();
                        if (node.action === 'add') {
                            searchTree.createNode({
                                                id: id,
                                                parent: node.key,
                                                text: id,
                                                a_attr: { level: 10 },
                                                icon: 'data/position.gif'
                                        });
                            $res.append('新增:<br/>');
                            $res.append('key-->' + id + ',text:' + id + '<br/>');
                        } else if (node.action === 'modify') {
                            $res.append('修改<br/>');
                        } else if (node.action === 'remove') {
                            searchTree.removeNode(node.key);
                            $res.append('删除<br/>');
                        }
                    }
                });
            };
        </script>
    </head>
    <body>
        <div class="demo">
            <div id="searchtree1"></div>
            <div id="result"></div>
        </div>
    </body>
</html>




